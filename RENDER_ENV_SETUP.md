# Render Environment Variables Setup Guide

## Required Environment Variables

You need to set these environment variables in your Render dashboard for the application to work properly.

### 1. Navigate to Your Service
Go to: https://dashboard.render.com ‚Üí Select your `beep-beep` service ‚Üí Environment tab

### 2. Add/Update These Variables

#### **NEXTAUTH_URL** (CRITICAL - Required for Login)
```
Key: NEXTAUTH_URL
Value: https://beep-beep-erxw.onrender.com
```
**Important:** This should be your deployed URL without trailing slash.

#### **NEXTAUTH_SECRET** (Auto-generated)
This should already be auto-generated by Render. If not:
```
Key: NEXTAUTH_SECRET
Value: [Any long random string - at least 32 characters]
```
You can generate one with: `openssl rand -base64 32`

#### **DATABASE_URL** (Auto-connected)
This should already be connected to your PostgreSQL database.
Format: `postgresql://user:password@host:port/database`

#### **NODE_ENV**
```
Key: NODE_ENV
Value: production
```

#### **PRISMA_ENGINES_CHECKSUM_IGNORE_MISSING**
```
Key: PRISMA_ENGINES_CHECKSUM_IGNORE_MISSING
Value: 1
```

---

## Optional: eBay Integration Variables

Add these when you're ready to configure eBay integration:

#### **EBAY_CLIENT_ID**
```
Key: EBAY_CLIENT_ID
Value: [Your eBay Application Client ID]
```
Get from: https://developer.ebay.com/my/keys

#### **EBAY_CLIENT_SECRET**
```
Key: EBAY_CLIENT_SECRET
Value: [Your eBay Application Client Secret]
```
Get from: https://developer.ebay.com/my/keys

#### **EBAY_RUNAME**
```
Key: EBAY_RUNAME
Value: [Your eBay RuName]
```
This is the Redirect URL Name from your eBay application settings.

#### **EBAY_SANDBOX** (Optional)
```
Key: EBAY_SANDBOX
Value: true
```
Set to `true` for sandbox environment, `false` or omit for production.

#### **EBAY_SCOPE** (Optional)
```
Key: EBAY_SCOPE
Value: https://api.ebay.com/oauth/api_scope
```
Default scope for eBay API access.

---

## Complete Environment Variables Checklist

### Minimum Required (for basic functionality):
- [x] `NEXTAUTH_URL` - **https://beep-beep-erxw.onrender.com**
- [x] `NEXTAUTH_SECRET` - Auto-generated by Render
- [x] `DATABASE_URL` - Auto-connected to PostgreSQL
- [x] `NODE_ENV` - production
- [x] `PRISMA_ENGINES_CHECKSUM_IGNORE_MISSING` - 1

### For eBay Integration:
- [ ] `EBAY_CLIENT_ID`
- [ ] `EBAY_CLIENT_SECRET`
- [ ] `EBAY_RUNAME`
- [ ] `EBAY_SANDBOX` (optional)
- [ ] `EBAY_SCOPE` (optional)

---

## How to Add Environment Variables in Render

1. Go to https://dashboard.render.com
2. Click on your `beep-beep` service
3. Click on **Environment** in the left sidebar
4. Click **Add Environment Variable**
5. Enter the Key and Value
6. Click **Save Changes**
7. Render will automatically redeploy your application

---

## Verification

After adding `NEXTAUTH_URL`, your application should:
- ‚úÖ Show login page correctly
- ‚úÖ Allow signup
- ‚úÖ Allow login
- ‚úÖ Redirect to dashboard after login
- ‚úÖ Show proper error messages

---

## Troubleshooting

### Login shows "Server error"
**Problem:** `NEXTAUTH_URL` is not set or incorrect
**Solution:** Set `NEXTAUTH_URL` to your deployed URL

### Database errors
**Problem:** `DATABASE_URL` not connected or migrations not run
**Solution:** Check database connection and redeploy (migrations run automatically)

### eBay OAuth errors
**Problem:** eBay credentials not set
**Solution:** Add `EBAY_CLIENT_ID`, `EBAY_CLIENT_SECRET`, and `EBAY_RUNAME`

---

## Current Status

Based on the error you're seeing (`/api/auth/error`), the most likely issue is:
- ‚ùå `NEXTAUTH_URL` is not set or set incorrectly

**Action Required:** 
Add `NEXTAUTH_URL=https://beep-beep-erxw.onrender.com` to your Render environment variables.

After adding it, Render will automatically redeploy and the login should work! üéâ

